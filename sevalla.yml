version: '1.0'

build:
  dockerfile: Dockerfile
  context: .

deploy:
  type: application
  name: saas-chatbot-backend
  port: 3000
  env:
    - name: NODE_ENV
      value: production
    - name: PORT
      value: "3000"
    # Auth0 environment variables will be set in the Sevalla dashboard
  
  volumes:
    - name: data
      mountPath: /app/data
      size: 1Gi

  healthCheck:
    path: /api/health
    initialDelaySeconds: 10
    periodSeconds: 30
